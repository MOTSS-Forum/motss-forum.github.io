{{ define "main" }}
{{ $pages := .RegularPages }}
{{ $paginator := .Paginate $pages }}

{{ with .Title }}
<h1>{{ . }}</h1>
{{ end }}
<content>
  {{ .Content }}
  {{ if not .Data.Singular }}
  {{ with where .Site.Taxonomies.tags ".Page.Section" .Section }}
  <small>
    <div><b>Tags:</b>
      {{ range . }}
      <a href="{{ .Page.RelPermalink }}">#{{ .Page.Title }}</a>&nbsp;
      {{ end }}
    </div>
  </small>
  {{ end }}
  {{ end }}
  <ul class="blog-posts">
    {{ range $paginator.Pages }}
    <li>
      <div>
        <a href="{{ .Params.external | default .RelPermalink }}" {{ if .Params.external }}target="_blank" {{ end }}>{{
          .Title }}</a>
        <div class="helptext">
          <span>{{ .Date.Format (default "Jan 02, 2006" .Site.Params.dateFormat) }}</span>
          <span>| {{ .Params.author | default .Site.Params.defaultAuthor | default (T "Anonymous") }}</span>
        </div>
      </div>
    </li>
    {{ else }}
    <li>
      No posts yet
    </li>
    {{ end }}
  </ul>
</content>
<nav>
  {{ $paginator := .Paginate $pages }}
  {{ template "_internal/pagination.html" . }}
</nav>
{{ end }}